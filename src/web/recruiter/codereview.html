<!doctype html>
<html lang="en">
<head>
    <title>Filter</title>
    <script type="text/javascript"
            src="http://AvailabilityDev01.getangular.com/angular-1.0a.js#database=AvailabilityDev01"></script>
</head>
<body>
<div ng-entity="Week; Twer" ng-init="weeks=[]">
    <label>Code-review Find: Week</label>
    <input name="$anchor.week_to_find">
    <label>day num offset</label>
    <input name="day_offset">
    <label>language</label>
    <input name="knows_language">
    <input type="button" value="load" ng-action="weeks=Week.query('ww', $anchor.week_to_find, {:ts=[];$.$each({:ts.push($.twer)}); $root.twers=Twer.loadMany(ts) })"/>
<!-- {{twers}} -->
    <!-- twer=Twer.loadOrCreate(twer_id) -->
XXX:{{twers.$findById(weeks[0].twer)}}
    <ul>
        <li ng-repeat="week in weeks.$filter({:$.days[day_offset].codereview &amp;&amp; twers.$findById($.twer).languages.$include(knows_language) }) ">
	    <div ng-eval="twer=twers[week.twer]">
            {{week}} <br/><br/><br/> {{twer}}
        </li>
    </ul>
</div>
</body>
</html>